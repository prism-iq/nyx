<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>flow / write</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0a;--fg:#e5e5e5;--dim:#333;--accent:#0ff;--code:#111}
body{font:15px/1.6 -apple-system,system-ui,sans-serif;background:var(--bg);color:var(--fg);min-height:100vh}
.container{max-width:800px;margin:0 auto;padding:40px 20px}
h1{font-size:13px;letter-spacing:4px;color:var(--accent);margin-bottom:8px}
.sub{color:#666;font-size:13px;margin-bottom:40px}
.types{display:grid;gap:12px;margin-bottom:30px}
.type{background:var(--code);border:1px solid var(--dim);padding:20px;border-radius:4px;cursor:pointer;transition:all .2s}
.type:hover,.type.selected{border-color:var(--accent)}
.type h3{font-size:15px;margin-bottom:6px}
.type p{color:#888;font-size:13px}
.type .price{color:var(--accent);font-size:12px;margin-top:8px}
.form{background:var(--code);padding:24px;border-radius:4px;display:none}
.form.show{display:block}
label{display:block;font-size:12px;color:#888;margin-bottom:6px;text-transform:uppercase;letter-spacing:1px}
input,textarea,select{width:100%;background:var(--bg);border:1px solid var(--dim);color:#fff;padding:12px;font:14px -apple-system,system-ui,sans-serif;border-radius:3px;margin-bottom:20px}
input:focus,textarea:focus{border-color:var(--accent);outline:none}
textarea{min-height:150px;resize:vertical}
button{background:var(--accent);color:#000;border:none;padding:14px 28px;font:14px -apple-system,system-ui,sans-serif;cursor:pointer;border-radius:3px;width:100%}
button:hover{background:#fff}
.timeline{margin-top:30px}
.timeline h3{font-size:14px;color:var(--accent);margin-bottom:16px}
.step{display:flex;margin-bottom:16px}
.step-num{width:28px;height:28px;background:var(--dim);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;margin-right:16px;flex-shrink:0}
.step-content h4{font-size:14px;margin-bottom:4px}
.step-content p{color:#888;font-size:13px}
.samples{margin-top:40px}
.samples h3{font-size:13px;color:#888;margin-bottom:16px}
.sample{padding:12px 16px;background:var(--code);margin-bottom:8px;border-radius:3px;font-size:13px;display:flex;justify-content:space-between;align-items:center}
.sample a{color:var(--accent);font-size:12px}
a{color:var(--accent)}
</style>
</head>
<body>
<div class="container">
<h1>flow / write</h1>
<p class="sub">r√©daction technique. dense, pr√©cise, rapide.</p>

<div class="types" id="types">
<div class="type" data-type="grant" data-price="500">
<h3>üìù Grant Proposal</h3>
<p>ANR, ERC, NIH... Je structure, je condense, je rends fundable.</p>
<div class="price">√† partir de 500‚Ç¨</div>
</div>

<div class="type" data-type="review" data-price="200">
<h3>üìä Literature Review</h3>
<p>Synth√®se structur√©e de 50-200 papers. Gaps identifi√©s.</p>
<div class="price">√† partir de 200‚Ç¨</div>
</div>

<div class="type" data-type="abstract" data-price="100">
<h3>‚ú® Abstract / Summary</h3>
<p>L'essentiel en 300 mots. Pour conf√©rences, submissions.</p>
<div class="price">100‚Ç¨</div>
</div>

<div class="type" data-type="response" data-price="150">
<h3>üí¨ R√©ponse aux Reviewers</h3>
<p>Point par point, diplomatique, efficace.</p>
<div class="price">150‚Ç¨</div>
</div>

<div class="type" data-type="custom" data-price="300">
<h3>üîß Autre</h3>
<p>Whitepaper, rapport technique, documentation...</p>
<div class="price">sur devis</div>
</div>
</div>

<div class="form" id="form">
<label>Type de document</label>
<input type="text" id="docType" readonly>

<label>Sujet / Titre provisoire</label>
<input type="text" id="title" placeholder="ex: Bioelectric control of morphogenesis">

<label>Contexte et objectifs</label>
<textarea id="context" placeholder="D√©cris ce que tu veux accomplir, pour qui c'est, deadline √©ventuelle..."></textarea>

<label>Documents de r√©f√©rence (optionnel)</label>
<input type="text" id="refs" placeholder="URLs ou 'j'uploaderai des PDFs'">

<label>Email</label>
<input type="email" id="email" placeholder="pour te recontacter">

<button id="submitBtn">Envoyer la demande</button>
</div>

<div class="timeline">
<h3>Comment √ßa marche</h3>
<div class="step">
<div class="step-num">1</div>
<div class="step-content">
<h4>Briefing</h4>
<p>Tu m'envoies le contexte. Je pose 2-3 questions si n√©cessaire.</p>
</div>
</div>
<div class="step">
<div class="step-num">2</div>
<div class="step-content">
<h4>Draft</h4>
<p>Premier jet en 24-72h selon complexit√©.</p>
</div>
</div>
<div class="step">
<div class="step-num">3</div>
<div class="step-content">
<h4>It√©ration</h4>
<p>Une r√©vision incluse. On affine jusqu'√† satisfaction.</p>
</div>
</div>
<div class="step">
<div class="step-num">4</div>
<div class="step-content">
<h4>Livraison</h4>
<p>Format final + sources organis√©es.</p>
</div>
</div>
</div>

<div class="samples">
<h3>Exemples de travaux</h3>
<div class="sample"><span>Grant ANR - Bio√©lectricit√© cellulaire</span><a href="#">aper√ßu</a></div>
<div class="sample"><span>Review - Gap junctions in development</span><a href="#">aper√ßu</a></div>
<div class="sample"><span>Abstract EMBO - Voltage patterns</span><a href="#">aper√ßu</a></div>
</div>

</div>

<script>
const types = document.querySelectorAll('.type');
const form = document.getElementById('form');
let selectedType = null;
let selectedPrice = 0;

types.forEach(t => {
    t.onclick = () => {
        types.forEach(x => x.classList.remove('selected'));
        t.classList.add('selected');
        selectedType = t.dataset.type;
        selectedPrice = parseInt(t.dataset.price);
        document.getElementById('docType').value = t.querySelector('h3').textContent;
        form.classList.add('show');
    };
});

document.getElementById('submitBtn').onclick = async () => {
    const data = {
        type: selectedType,
        title: document.getElementById('title').value,
        context: document.getElementById('context').value,
        refs: document.getElementById('refs').value,
        email: document.getElementById('email').value,
        price: selectedPrice
    };

    if (!data.title || !data.email) {
        alert('Remplis au moins le sujet et ton email');
        return;
    }

    try {
        await fetch('/api/flow/write/request', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        });
        alert('Demande envoy√©e ! Je te recontacte sous 24h.');
        form.classList.remove('show');
        types.forEach(x => x.classList.remove('selected'));
    } catch(e) {
        alert('Demande enregistr√©e (mode d√©mo). Je te recontacterais √† ' + data.email);
    }
};
</script>
</body>
</html>
